---
import { Routes } from "~/constants/routes";
import NavLink from "~/components/ui/NavLink.astro";
---

<nav>
	<NavLink href={Routes.Home}>Home</NavLink>
	<NavLink href={Routes.Pricing}>Pricing</NavLink>
</nav>

<script is:inline>
	const hideCurrentPathLink = () => {
		const { pathname } = window.location;
		const path =
			pathname.endsWith("/") && pathname !== "/"
				? pathname.slice(0, -1) // trim trailing slash
				: pathname;

		const selector = `nav [href='${path}']`;
		const currentPageLink = document.querySelector(selector);

		currentPageLink?.style.setProperty("display", "none");
	};

	// on direct page access
	hideCurrentPathLink();

	// on view transition
	document.addEventListener("astro:after-swap", hideCurrentPathLink);
</script>

<style>
	nav {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}
</style>
